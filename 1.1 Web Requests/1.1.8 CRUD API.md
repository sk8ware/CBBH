
---

## ğŸ”§ CRUD API 

> **CRUD = Create, Read, Update, Delete**  
> Se usa para interactuar con APIs que acceden a bases de datos a travÃ©s de rutas especÃ­ficas + mÃ©todos HTTP.

---

### ğŸŒ URL Base

```bash
http://<IP>:<PORT>/api.php/<tabla>/<dato>
```

ğŸ“Œ En este curso usamos:

- Tabla: `city`
    
- Ejemplo de fila: `london`
    

---

## ğŸŸ¢ **READ (GET)**

### ğŸ“„ Leer una ciudad:

```bash
curl -s http://<IP>:<PORT>/api.php/city/london | jq
```

### ğŸ“„ Leer todas las ciudades:

```bash
curl -s http://<IP>:<PORT>/api.php/city/ | jq
```

ğŸ“Œ La salida es formato **JSON**, puedes usar `jq` para ver bien.

---

## ğŸŸ¡ **CREATE (POST)**

### â• AÃ±adir una nueva ciudad:

```bash
curl -X POST http://<IP>:<PORT>/api.php/city/ \
  -d '{"city_name":"HTB_City", "country_name":"HTB"}' \
  -H 'Content-Type: application/json'
```

### ğŸ” Verificar que fue aÃ±adida:

```bash
curl -s http://<IP>:<PORT>/api.php/city/HTB_City | jq
```

---

## ğŸ”µ **UPDATE (PUT)**

### âœï¸ Modificar una ciudad existente:

```bash
curl -X PUT http://<IP>:<PORT>/api.php/city/london \
  -d '{"city_name":"New_HTB_City", "country_name":"HTB"}' \
  -H 'Content-Type: application/json'
```

### ğŸ” Verificar:

```bash
curl -s http://<IP>:<PORT>/api.php/city/New_HTB_City | jq
```

ğŸ“Œ Si `london` no existÃ­a, puede que **no cree** el nuevo, depende de cÃ³mo estÃ© implementada la API.

---

## ğŸ”´ **DELETE (DELETE)**

### ğŸ—‘ï¸ Eliminar una ciudad:

```bash
curl -X DELETE http://<IP>:<PORT>/api.php/city/New_HTB_City
```

### âŒ Verificar que fue eliminada:

```bash
curl -s http://<IP>:<PORT>/api.php/city/New_HTB_City | jq
# Resultado esperado: []
```

---

## ğŸ” AutenticaciÃ³n

- Algunas APIs requieren:
    
    - Cookie de sesiÃ³n â†’ `-b 'PHPSESSID=...'`
        
    - Header `Authorization: Bearer <token>`
        

Ejemplo:

```bash
curl -H "Authorization: Bearer <token>" ...
```

---

### ğŸ§  Tips rÃ¡pidos

|AcciÃ³n|MÃ©todo HTTP|Comando base|
|---|---|---|
|Crear|POST|`curl -X POST -d '{json}' ...`|
|Leer|GET|`curl http://...`|
|Actualizar|PUT|`curl -X PUT -d '{json}' ...`|
|Eliminar|DELETE|`curl -X DELETE http://...`|

---
